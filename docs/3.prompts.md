# Creating MCP Prompts

Prompt engineering is one of the most difficult parts of an AI workflow. It can take time to craft a prompt, adding in details to catch edge cases and refine it to achieve the outcome you are looking for. MCP provides a mechanism to allow server creators to provide prompts which the client can consume to speed up common tasks they expect users to perform.

In this section, we will define a prompt, and use it in a local client.

## Table of Contents

1. [Define a reusable prompt](#task-1-define-a-reusable-prompt)
1. [Test the `format` prompt](#task-2-test-the-format-prompt)
1. ADVANCED: [Create a prompt to summarise a document](#task-3-create-a-prompt-to-summarise-a-document)

## Task 1: Define a Reusable Prompt

Our first step is to define the prompt we will make available to our MCP clients. Creating a prompt is done in much the same was as the other items we have already created. Like resources, prompts can either be static or define parameters that must be provided to use the prompt effectively.

In this task, we will create a prompt which will make it easy for a user to reformat a document into Markdown. As you might guess from the description, this prompt will require a parameter to be passed in.

Open `src/server.py` and locate the `# TODO: Write a prompt to rewrite a doc in markdown format` comment. Replace the comment with the code below.

```python
@mcp_server.prompt(
    name="format",
    description="Rewrites the contents of the document in Markdown format.",
)
def format_document(
    doc_id: str = Field(description="Id of the document to format"),
) -> list[base.Message]:
    prompt = f"""
    Your goal is to reformat a document to be written with markdown syntax.

    The id of the document you need to reformat is:
    <document_id>
    {doc_id}
    </document_id>

    First, fetch the contents of the document with the 'read_document_contents' tool.
    Add in headers, bullet points, tables, etc as necessary. Feel free to add in extra text, but don't change the meaning of the report.
    Use the 'edit_document' tool to edit the document. After the document has been edited, respond with the final version of the doc. Don't explain your changes.
    """

    return [base.UserMessage(prompt)]
```

The decorator should be looking familiar to you by now. We define the name of the prompt (`format`) and provide a description. We also specify a parameter to the function, and provide a description to explain what is required. We then define the prompt as a text string, and provide the document ID as a parameter in the middle.

## Task 2: Test the `format` Prompt

To test the prompt, we will use a basic MCP client from the `client.py` file. To launch the client, open the command palette and run the **MCP Client** task. This will open the Panel with the MCP server output on one side and the MCP client on the right. At the `ðŸ‘¤ You: ` prompt, enter `/format outlook.pdf` and press enter to send this to the client. You will see the flow between the LLM, MPC server, and client. Eventually you will get a response back which will be founded from the prompt.

After checking that everything works, open the command palette, and run the **Terminate All Tasks** task to close down your MCP server and the client.

## Task 3: Create a Prompt to Summarise a Document

Based on the formatting prompt, create a prompt in your MCP server to summarise a document. Replace the `# TODO: Write a prompt to summarize a doc` comment with your code. For an example solution, check out [the completed `server.py`](https://github.com/oWretch/building-mcp-servers/blob/complete/src/server.py).
